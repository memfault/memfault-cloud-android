// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    ext.versions = [
        'kotlin': '1.5.20',
        'minSdk': 18,
        'compileSdk': 30,
        'appCompat': '1.3.0',
        'coreKtx': '1.6.0',
        'constraintLayout': '2.0.4',
        'dokka': '0.10.1',
        'androidGradlePlugin': '4.2.2',
        'json': '20180130',
        'junit': '5.7.2',
        'ktlintGradle' : '10.1.0',
        'lifecycleExtensions': '2.2.0',
        'leakCanary': '2.7',
        'mockk': '1.12.0',
        'okio': '2.10.0',
        'tape': '2.0.0-beta1',
        'viewmodelKtx': '2.3.1'
    ]
    ext.deps = [
        'android': [
            'appCompat': "androidx.appcompat:appcompat:${versions.appCompat}",
            'coreKtx': "androidx.core:core-ktx:${versions.coreKtx}",
            'constraintLayout': "androidx.constraintlayout:constraintlayout:${versions.constraintLayout}",
            'gradlePlugin': "com.android.tools.build:gradle:${versions.androidGradlePlugin}",
            'lifecycleExtensions': "androidx.lifecycle:lifecycle-extensions:${versions.lifecycleExtensions}",
            'viewmodelKtx': "androidx.lifecycle:lifecycle-viewmodel-ktx:${versions.viewmodelKtx}",
        ],
        'kotlin': [
            'gradlePlugin': "org.jetbrains.kotlin:kotlin-gradle-plugin:${versions.kotlin}",
            'ktlintGradle' : "org.jlleitschuh.gradle:ktlint-gradle:${versions.ktlintGradle}",
            'stdlib': "org.jetbrains.kotlin:kotlin-stdlib-jdk8:${versions.kotlin}",
        ],
        'dokka': "org.jetbrains.dokka:dokka-gradle-plugin:${versions.dokka}",
        'okio': "com.squareup.okio:okio:${versions.okio}",
        'leakCanary': "com.squareup.leakcanary:leakcanary-android:${versions.leakCanary}",
        'tape': "com.squareup.tape2:tape:${versions.tape}",
        'test': [
            'kotlin': [
                'common': 'org.jetbrains.kotlin:kotlin-test-common',
                'jdk': 'org.jetbrains.kotlin:kotlin-test-junit5',
            ],
            'mockk': "io.mockk:mockk:${versions.mockk}",
            'json': "org.json:json:${versions.json}",
            'junitApi' : "org.junit.jupiter:junit-jupiter-api:${versions.junit}",
            'junitEngine' : "org.junit.jupiter:junit-jupiter-engine:${versions.junit}",
        ]
    ]
    repositories {
        google()
        maven {
            url "https://plugins.gradle.org/m2/"
        }

    }
    dependencies {
        classpath deps.android.gradlePlugin
        classpath deps.kotlin.gradlePlugin
        classpath deps.kotlin.ktlintGradle
        classpath deps.dokka
    }
}

allprojects {
    repositories {
        mavenCentral()
        google()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

subprojects {
    apply plugin: "org.jlleitschuh.gradle.ktlint"

    ktlint {
        version = "0.41.0"
        android = true
        outputColorName = "RED"
    }
}
